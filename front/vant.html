<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=no,minimal-ui">
    <title>会议室预订系统</title>
    <link rel="icon" href="images/favico.ico">
    <!--不同屏幕尺寸根字体设置-->
    <script src="./js/base.js"></script>
    <!--element-ui的样式-->
    <link rel="stylesheet" href="../backend/plugins/element-ui/index.css" />
    <!--引入vant样式-->
    <link rel="stylesheet" href="styles/vant.min.css" />
    <!-- 引入样式  -->
    <link rel="stylesheet" href="styles/index.css" />
    <!--本页面内容的样式-->
    <link rel="stylesheet" href="styles/main.css" />
</head>

<body>
    <div id="main" class="app">
        <!-- <van-field readonly clickable label="城市" :value="value" placeholder="选择城市" @click="showPicker = true" /> -->
        <van-popup v-model="showPicker" round position="bottom">
            <van-picker show-toolbar :columns="columns" @cancel="showPicker = false" @confirm="onConfirm" />
        </van-popup>
    </div>
    <!-- 开发环境版本，包含了有帮助的命令行警告 -->
    <script src="../backend/plugins/vue/vue.js"></script>
    <!-- 引入组件库 -->
    <script src="../backend/plugins/element-ui/index.js"></script>
    <!-- 引入vant样式 -->
    <script src="./js/vant.min.js"></script>
    <!-- 引入axios -->
    <script src="../backend/plugins/axios/axios.min.js"></script>
    <script src="./js/request.js"></script>
    <script src="./js/common.js"></script>
    <script src="./api/main.js"></script>
</body>
<script>
    var app = new Vue({
        el: '#main',
        data() {
            return {
                value: '',
                showPicker: false,
                // columns: ['杭州', '宁波', '温州', '绍兴', '湖州', '嘉兴', '金华', '衢州'],
                columns: [
                    {
                        text: '浙江',
                        children: [
                            {
                                text: '杭州',
                                children: [{ text: '西湖区' }, { text: '余杭区' }],
                            },
                            {
                                text: '温州',
                                children: [{ text: '鹿城区' }, { text: '瓯海区' }],
                            },
                        ],
                    },
                    {
                        text: '福建',
                        children: [
                            {
                                text: '福州',
                                children: [{ text: '鼓楼区' }, { text: '台江区' }],
                            },
                            {
                                text: '厦门',
                                children: [{ text: '思明区' }, { text: '海沧区' }],
                            },
                        ],
                    },
                ],
            }
        },
        computed: {
            /* goodsNum() {
                let num = 0
                this.cartData.forEach(item => {
                    num += item.number
                })
                if (num < 99) {
                    return num
                } else {
                    return '99+'
                }
            },
            goodsPrice() {
                let price = 0
                this.cartData.forEach(item => {
                    price += (item.number * item.amount)
                })
                return price
            } */
        },
        created() {
        },
        watch: {
            'dialogFlavor.show'(flag) {
                if (flag) {
                    document.querySelector('.divCart').style.zIndex = 1
                } else {
                    document.querySelector('.divCart').style.zIndex = 3000
                }
            },
        },
        mounted() {
            // this.initData()
        },
        methods: {
            async initData() {
                await queryBuildingsApi().then(res => {
                    if (res.code == 100) {
                        this.buildings.push(...res.data)
                        // this.$notify({ type: 'success', message: '取消成功' });
                    } else {
                        // this.$notify({ type: 'warning', message: res.msg });
                    }
                }).catch(err => {
                    // this.$notify({ type: 'warning', message: err });
                })

                // this.queryRoomsByBuildingId(6)
            },
            async queryRoomsByBuildingId(buildingId) {
                await queryRoomsApi(buildingId).then(res => {
                    if (res.code == 100) {
                        this.rooms.push(...res.data)
                        // this.$notify({ type: 'success', message: '取消成功' });
                    } else {
                        // this.$notify({ type: 'warning', message: res.msg });
                    }
                }).catch(err => {
                    // this.$notify({ type: 'warning', message: err });
                })
            },
            changeBuilding(buildingId) {
                // console.log(this.buildingId)
                if (this.buildingId == -1) {
                    return
                }
                this.rooms = [{ text: '请选择房间', value: -1 }]
                this.queryRoomsByBuildingId(buildingId)
            },
            onConfirm(value) {
                this.value = value;
                this.showPicker = false;
            },
            test() {
                console.log(1)
            }
        }
    })
</script>

</html>